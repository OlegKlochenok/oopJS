# Объектно-ориентированное программирование

Прежде чем погрузиться в JavaScript, давайте рассмотрим, что люди имеют в виду, когда говорят про ориентированное на объекты программирование, и каковы основные особенности этого стиля программирования.
Вот список концепций, которые чаще всего используются при разговоре об объектно-ориентированном программировании (ООП):

- Объекты, методы и свойства
- Класс
- Инкапсуляция
- Агрегация
- Повторное использование и наследование
- Полиморфизм

Давайте подробнее рассмотрим каждую из этих концепций. Если вы новичок в жаргоне объектно-ориентированного программирования, эти концепции могут показаться слишком теоретическими, и у вас могут возникнуть проблемы с пониманием или запоминанием их при одном чтении. Не волнуйтесь, это займет несколько попыток, и предмет может быть немного сухим на концептуальном уровне. Тем не менее, мы рассмотрим множество примеров кода далее в книге, и вы увидите, что на практике все намного проще.

## Объекты

Как следует из названия ООП (объектно-ориентированного программирования), объекты важны.
Объект - это представление сущности (кого-то или чего-то), и это представление выражается с помощью языка программирования.
Вещь может быть чем угодно, реальным объектом или более запутанной концепцией. Взяв, например, общий объект, кошку, вы можете видеть, что она имеет определенные характеристики - цвет, имя, вес и так далее, и может выполнять некоторые действия - мяукать, спать, прятаться, убегать и так далее.
В ООП характеристики объекта называются свойствами, а действия называются методами. Аналогия с разговорным языком выглядит следующим образом: объекты чаще всего называются с использованием существительных, таких как книга, человек и т.д. Для называния методов используют глаголы, например, читать, бегать и так далее. Для называния свойств используют прилагательные.
Возьмем в качестве примера предложение "Черная кошка спит на коврике". "Кошка" (существительное) - это объект, "черный" (прилагательное) - значение свойства цвета, а "сон" (глагол) - это действие или метод в ООП. Ради аналогии мы можем пойти еще дальше и сказать, что "на коврике" указывает на некую характеристику действия "сон", поэтому "на коврике"  -  параметр, передаваемый методу сна.

## Классы

В реальной жизни похожие объекты могут быть сгруппированы на основе некоторых критериев. Колибри и орел являются птицами, поэтому их можно классифицировать как принадлежащие к какому-то классу сделанных птиц. В OOP класс - это план или рецепт объекта. Другое название объекта - экземпляр, поэтому мы можем сказать, что орел - это один конкретный экземпляр общего класса Birds.
Вы можете создавать разные объекты, используя один и тот же класс, потому что класс - это просто шаблон, в то время как объекты - это конкретные экземпляры, основанные на шаблоне. Есть разница между JavaScript и классическими языками OOП, такими как C++ и Java.
Вы должны знать с самого начала, что в JavaScript нет классов; все основано на объектах. JavaScript имеет понятие прототипов, которые также являются объектами (мы подробно обсудим их позже).
На классическом языке OOП вы бы сказали что-то вроде - создайте для меня новый объект под названием Боб, который из класса Person. На прототипном объектно-ориентированном языке, вы бы сказали: я собираюсь взять этот объект под названием отец Боба (или называется person?), который у меня лежит (на диване перед телевизором?), и повторно использую его в качестве прототипа для нового объекта, который я назову Бобом.

## Инкапсуляция и сокрытие информации

Инкапсуляция - это еще одна концепция, связанная с ООП. Объект содержит (инкапсулирует) следующее:

- Данные (Data), хранятся в свойствах (properties)
- Средства (чтобы сделать что-то с данными с их помощью, то есть – с помощью, как они называются, методов (method))

Еще один термин, который сочетается с инкапсуляцией - сокрытие информации. Это довольно широкий термин и может означать разные вещи, но давайте посмотрим, что люди обычно имеют в виду, когда используют его в контексте ООП.
Представьте себе объект, скажем, MP3-плеер. Вам, как пользователю объекта, предоставляется некоторый интерфейс для работы, такой как кнопки, дисплей и так далее. Вы используете интерфейс, чтобы заставить объект сделать что-то полезное для вас, например, воспроизвести песню. Как именно устройство работает внутри, вы не знаете, и, чаще всего, вам все равно. Другими словами, реализация интерфейса скрыта от вас.
То же самое происходит в OOP, когда ваш код использует объект, вызывая его методы. Неважно, закодировали ли вы объект самостоятельно или он пришел из какой-то сторонней библиотеки; вашему коду не нужно знать, как методы работают внутри. В скомпилированных языках вы фактически не можете прочитать код, который заставляет объект работать. В JavaScript, поскольку это интерпретируемый язык, вы можете увидеть исходный код, но концепция все та же - вы работаете с интерфейсом объекта, не беспокоясь о его реализации.
Другим аспектом сокрытия информации является видимость методов и свойств. В некоторых языках объекты могут иметь публичные, частные и защищенные методы и свойства. Эта категоризация определяет уровень доступа пользователей объекта. Например, только методы одного и того же объекта имеют доступ к частным методам, в то время как любой имеет доступ к общедоступным. В JavaScript все методы и свойства являются общедоступными, но мы увидим, что есть способы защитить данные внутри объекта и обеспечить конфиденциальность.

## Агрегация

Объединение нескольких объектов в новый, называется агрегацией или композицией.
Это мощный способ разделить проблему на более мелкие и управляемые части (разделить чтобы победить). Когда проблема настолько сложна, что невозможно думать о ней на подробном уровне в целом, вы можете разделить проблему на несколько меньших областей, а затем, возможно, разделить каждую из них на еще более мелкие куски. Это позволяет вам думать о проблеме на нескольких уровнях абстракции.
Возьмем, к примеру, персональный компьютер. Это сложный объект. Вы не можете думать обо всем, что должно произойти при запуске компьютера. Но вы можете абстрагировать проблему, говоря, что вам нужно инициализировать все отдельные объекты, из которых состоит ваш компьютер: объект монитора, объект мыши, объект клавиатуры и так далее. Затем вы можете глубже погрузиться в каждый из этих объектов, деля их на субобъекты. Таким образом, вы создаете сложные объектно-ориентированные конструкции, собирая многоразовые детали.
Используя другую аналогию, объект Book может содержать (агрегировать) один или несколько объектов Author, объект Publisher, несколько объектов Chapter, TOC (оглавление) и так далее.

## Наследование

Наследование - это элегантный способ повторного использования существующего кода.
Например, у вас может быть общий объект, Person (Личность), который имеет такие свойства, как name (имя) и date_of_birth (дата рождения), а также реализует функциональность walk (ходить), talk (говорить), sleep (спать) и eat (кушать). Затем вы понимаете, что вам нужен еще один объект под названием Programmer (Программист). Вы можете повторно реализовать все методы и свойства, которые есть у объекта Person, но будет разумнее просто сказать, что объект Programmer наследует объект Person, и сэкономить немного работы. Объекту Programmer нужно только реализовать более специфическую функциональность, такую как метод writeCode (писатьКод), при повторном повторном использованием всей функциональности объекта Person.
В классическом ООП классы наследуют от других классов, но в JavaScript, поскольку классов нет, объекты наследуют от других объектов. Когда объект наследует от другого объекта, он обычно добавляет новые методы к унаследованным, тем самым расширяя старый объект.
Часто следующие фразы могут использоваться взаимозаменяемо - "B наследует от A" и "B расширяет A".
Кроме того, объект, который наследует, может выбрать один или несколько методов и изменить их, настроив для своих собственных нужд. Таким образом, интерфейс остается прежним, и имя метода то же самое, но при вызове нового объекта метод ведет себя по-другому. Этот способ изменения того, как работает унаследованный метод, обычно называется "переопределение".

## Полиморфизм

В предыдущем примере объект Programmer унаследовал все методы родительского объекта Person. Это означает, что оба объекта, среди прочего, обеспечивают метод talk (говорить). Теперь представьте, что где-то в вашем коде есть переменная под названием Bob, и так получилось, что вы не знаете, является ли Bob объектом Person или объектом Programmer. Вы можете вызвать (написать) метод talk на объекте Боб, и код будет работать. Эта способность вызывать один и тот же метод на разных объектах и заставляйте каждый из них реагировать по-своему, называется полиморфизмом.

## Итоги

- Боб - это человек. Это Объект
- Дата рождения Боба 1 июня 1980 года, пол мужской, а волосы черные. Это Свойства.
- Боб может есть, спать, пить, мечтать, говорить и рассчитывать свой возраст. Это Методы.
- Боб является экземпляром класса Programmer. Это Class - класический ООП, ООП основанный на классах.
- Боб основан на другом объекте под названием Programmer – это Prototype. Это прототипический ООП, ООП основанный на прототипах.
- Боб хранит данные, такие как birth_date (дата рождения), и методы, которые работают с данными, такие как calculateAge()(рассчитать возраст). Это инкапсуляция.
- Вам не нужно знать, как метод расчета работает внутри компании. Объект может иметь некоторые личные данные, такие как количество дней в феврале в високосном году. Ты не знаешь и не хочешь знать. Это сокрытие информации.
- Боб является частью объекта WebDevTeam вместе с Джилл, объектом Designer, и Джеком, объектом ProjectManager. Это агрегирование/композиция.
- Дизайнер, ProjectManager и Programmer основаны на объекте Person и расширяют его. Это наследование.
- Вы можете вызвать методы Bob.talk(), Jill.talk() и Jack.talk(), и все они будут работать нормально, хотя и дадут разные результаты. Боб, вероятно, расскажет больше о производительности, Джилл о красоте, а Джек о сроках. Каждый объект унаследовал метод разговора от Person и настроил его. Это полиморфизм и переопределение методов.

## Инструменты: JavaScriptCore на Mac

Если вы никогда не использовали терминал, вы можете просто найти его в поиске Spotlight.
После запуска введите следующую команду:

```bash
alias jsc='/System/Library/Frameworks/JavaScriptCore.framework/Versions/A/Resources/jsc'
# или
alias jsc='/System/Library/Frameworks/JavaScriptCore.framework/Versions/A/Helpers/jsc'
# посмотрите где jsc находится в Вашей системе
```

Эта команда создает псевдоним для маленького приложения jsc, которое расшифровывается как JavaScriptCore и является частью движка WebKit. JavaScriptCore поставляется вместе с операционными системами Mac. Вы можете добавить строку псевдонима, показанную ранее, в файл ~/.zshrc, чтобы jsc всегда был рядом, когда вам это нужно. Теперь, чтобы запустить интерактивную оболочку, вы просто наберете jsc из любого каталога. Затем вы можете ввести JavaScript-выражения, и когда вы нажмете Enter, вы увидите результат выражения.
